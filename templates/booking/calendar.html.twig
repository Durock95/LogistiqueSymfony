{# templates/booking/calendar.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Calendar{% endblock %}

{% block stylesheets %}
  <link rel="stylesheet" href="{{ asset('styles/calendar.css')}}" type="text/css">
{% endblock %}

{% block javascripts %}
	<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
  const calendarEl = document.getElementById('calendar-holder');

  const calendar = new FullCalendar.Calendar(calendarEl, {
      defaultView: 'dayGridMonth',
      locale: 'fr',
      editable: true,
      eventSources: [
          {
              url: '/fc-load-events',
              method: 'POST',
              extraParams: {
                  filters: JSON.stringify({})
              },
              failure: () => {
                  // alert('There was an error while fetching FullCalendar!');
              },
          },
      ],
      headerToolbar: {
          start: 'prev,next today',
          center: 'title',
          end: 'dayGridMonth,timeGridWeek,timeGridDay'
      },
     
      timeZone: 'Europe/Paris',
      events: {{ data|raw }},
  });
  calendar.render();
});
  </script>
{% endblock %}

{% block body %}
	<a href="{{ path('app_booking_new') }}">Create new booking</a>

	<div id="calendar-holder"></div>
{% endblock %}


